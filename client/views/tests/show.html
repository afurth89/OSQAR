<div class="row">
  <div class="col-xs-10 col-xs-offset-1">
    <div class="jumbotron pg-content-container">
      <h1 class="pg-content-title">{{vm.test.title}}</h1>
      <div id="newTestForm" class="well">
        <span>
          <a class="btn btn-warning" href="/tests/{{vm.test._id}}/edit">Edit Test</a>
          <a class="btn btn-danger" ng-click="vm.removeTest()">Delete Test</a>
        </span>
        <br>
        <span class="label {{vm.test.catClass}}">
          {{vm.test.category}}
        </span>
        <br>
        <a class="btn btn-info" ng-click="vm.toggleShowTestQs()">{{vm.showTestQuestions.text}}</a>
        <a class="btn btn-success" ng-click="vm.toggleCreateNewQsForTest()">{{vm.createNewQuestionFormDisplay.text}}</a>
        <a class="btn btn-primary" ng-click="vm.toggleAddExistingQsToTest()">{{vm.addExistingQuestionFormDisplay.text}}</a>

        <div id="showTestQuestionsContainer" ng-show="vm.showTestQuestions.value">
          <p>Questions:
            <ul ng-repeat="question in vm.test.questions">
              <li>Category: {{question.category}}</li>
              <li>Question: {{question.text}}</li>
              <ul ng-repeat="choice in question.choices">
                <li>Choice: {{choice.text}}</li>
              </ul>
              <li>Correct Answer: {{question.correct}}</li>
              <a class="btn btn-danger" ng-click="vm.removeQuestionFromTest(question._id)">Remove Question</a>
            </ul>
          </p>
        </div>
        
        <div id="createQuestionAddToTestForm" class="well" ng-show="vm.createNewQuestionFormDisplay.value" ng-controller="NewQuestionController as vmNewQuestion">
          <form ng-submit="vmNewQuestion.addQuestion(vmNewQuestion.question, vm.test._id)">
            <div class="form-group">
              <label>Question Text</label>
              <textarea ng-model="vmNewQuestion.question.text" type="textarea" class="form-control" placeholder="Enter your question..."></textarea>
            </div>
            <div class="form-group">
              <label for="questionCategory">Select a Category:</label>
                <select name="questionCategory" id="questionCategorySelector"
                  ng-model="vmNewQuestion.question.category">
                  <option value="Math">Math</option>  
                  <option value="English">English</option>  
                  <option value="Social Studies">Social Studies</option>  
                  <option value="Science">Science</option>  
                </select>
            </div>
            <div class="form-group">
              <p>Answer Choices (Select the correct answer before submitting)</p>
              <label>A:</label>
              <input type="radio" ng-model="vmNewQuestion.question.correct.id" value="1">
              <input ng-model="vmNewQuestion.question.choices[0].text" type="text" class="form-control" placeholder="Enter Choice A...">
              <label>B:</label>
              <input type="radio" ng-model="vmNewQuestion.question.correct.id" value="2">
              <input ng-model="vmNewQuestion.question.choices[1].text" type="text" class="form-control" placeholder="Enter Choice B...">
              <label>C:</label>
              <input type="radio" ng-model="vmNewQuestion.question.correct.id" value="3">
              <input ng-model="vmNewQuestion.question.choices[2].text" type="text" class="form-control" placeholder="Enter Choice C...">
              <label>D:</label>
              <input type="radio" ng-model="vmNewQuestion.question.correct.id" value="4">
              <input ng-model="vmNewQuestion.question.choices[3].text" type="text" class="form-control" placeholder="Enter Choice D...">
            </div>
            <button type="submit" class="btn btn-success">Create Question</button>
          </form>
        </div>

        <div id="addExistingQuestionToTestContainer" ng-show="vm.addExistingQuestionFormDisplay.value">
          <p>All Questions:
            <div class="well" ng-repeat="question in vm.allQuestionsList">
              <ul>
                <li>Category: {{question.category}}</li>
                <li>Question: {{question.text}}</li>
                <ul ng-repeat="choice in question.choices">
                  <li>Choice: {{choice.text}}</li>
                </ul>
                <li>Correct Answer: {{question.correct}}</li>
                <a class="btn btn-success" ng-click="vm.addExistingQuestionToTest(question._id)">Add Question</a>
              </ul>
            </div>
          </p>
        </div>
      </div>
      <a class="btn btn-primary" href="/tests">Back to All Tests</a>
    </div>
  </div>
</div>
